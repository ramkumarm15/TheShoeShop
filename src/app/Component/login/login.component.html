<main>
  <div class="container">
    <div
      class="row min-vh-100 d-flex justify-content-center align-items-center"
    >
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <h3 class="text-center mb-4">Sign in to store</h3>
            <form
              class="form"
              [formGroup]="loginForm"
              (ngSubmit)="formSubmit()"
            >
              <div class="form-group mb-3">
                <label for="username" class="form-label">Username</label>
                <input
                  class="form-control bg-transparent shadow-none"
                  placeholder="Hey, what's your username?"
                  name="username"
                  id="username"
                  formControlName="username"
                  required
                  [ngClass]="{
                    'is-invalid':
                      loginForm.controls['username'].invalid &&
                      loginForm.controls['username'].touched,
                    '': loginForm.controls['username'].valid
                  }"
                />
                <div
                  class="invalid-feedback"
                  *ngIf="(loginForm.controls['username'].touched || loginForm.invalid) && loginForm.controls['username'].errors?.['required']"
                >
                  Username is required
                </div>
                <div
                  class="invalid-feedback"
                  *ngIf="(loginForm.controls['username'].touched || loginForm.invalid) && loginForm.controls['username'].errors?.['minlength']"
                >
                  Minimum length is 8 characters
                </div>
              </div>
              <div class="form-group mb-3">
                <label for="password" class="form-label">Password</label>
                <div class="input-group">
                  <input
                    [type]="passwordHide ? 'password' : 'text'"
                    class="form-control"
                    placeholder="type your password ðŸ™ˆ"
                    name="password"
                    id="password"
                    formControlName="password"
                    required
                    [ngClass]="{
                      'is-invalid':
                        loginForm.controls['password'].invalid &&
                        loginForm.controls['password'].touched,
                      '': loginForm.controls['password'].valid
                    }"
                  />
                  <span class="input-group-text rounded-end">
                    <a
                      class="px-2"
                      [style]="{ cursor: 'pointer' }"
                      (click)="passwordShow()"
                    >
                      <i class="bi bi-eye" *ngIf="passwordHide"></i>
                      <i class="bi bi-eye-slash" *ngIf="!passwordHide"></i>
                    </a>
                  </span>
                  <div
                    class="invalid-feedback"
                    *ngIf="(loginForm.controls['password'].touched 
            || loginForm.controls['password'].invalid ) 
            && loginForm.controls['password'].errors?.['required']"
                  >
                    This field is required
                  </div>
                  <div
                    class="invalid-feedback"
                    *ngIf="(loginForm.controls['password'].touched 
            || loginForm.controls['password'].invalid ) 
            && loginForm.controls['password'].errors?.['minlength']"
                  >
                    Minimum length is 8 characters
                  </div>
                </div>
              </div>
              <div class="form-group text-center mb-3">
                <button
                  type="submit"
                  *ngIf="!loggingIn"
                  class="btn btn-primary"
                  id="submit"
                >
                  Login
                </button>
                <button
                  type="button"
                  *ngIf="loggingIn"
                  class="btn btn-primary pe-none"
                >
                  <span
                    class="spinner-grow spinner-grow-sm me-2"
                    role="status"
                    aria-hidden="true"
                  ></span>
                  <span>logging in you...</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
